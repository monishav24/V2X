# ============================================================
# SmartV2X-CP Ultra — OBU Configuration
# ============================================================

device:
  vehicle_id: ""                      # Auto-generated on first boot
  device_name: "OBU-Alpha-001"
  firmware_version: "1.0.0"

# ── Sensor Port Configuration ──────────────────────────────
sensors:
  gps:
    enabled: true
    port: "/dev/ttyUSB0"              # Serial port for GPS module
    baud_rate: 9600
    update_rate_hz: 10
    simulation: true                  # Set false for real hardware

  imu:
    enabled: true
    port: "/dev/ttyUSB1"
    baud_rate: 115200
    update_rate_hz: 100
    simulation: true

  radar:
    enabled: true
    port: "/dev/ttyUSB2"
    baud_rate: 115200
    max_range_m: 200
    update_rate_hz: 20
    simulation: true

  camera:
    enabled: false
    device_index: 0
    resolution: [640, 480]
    fps: 30

# ── Sensor Fusion ──────────────────────────────────────────
fusion:
  process_noise: 0.1
  measurement_noise_gps: 1.0
  measurement_noise_imu: 0.5
  state_dim: 6                        # [x, y, vx, vy, ax, ay]

# ── AI Prediction ─────────────────────────────────────────
prediction:
  model_path: "models/trajectory_lstm_gru.pth"
  prediction_horizon_sec: 5
  sequence_length: 20
  hidden_size: 128
  num_layers: 2
  use_onnx: false

# ── Collision Risk ─────────────────────────────────────────
collision:
  ttc_threshold_high: 2.0             # seconds
  ttc_threshold_medium: 5.0
  min_distance_alert_m: 10.0

# ── Edge Server Communication ─────────────────────────────
edge_server:
  url: "https://localhost:8000"
  api_prefix: "/api"
  auth_endpoint: "/api/auth/login"
  update_endpoint: "/api/vehicle/update"
  register_endpoint: "/api/vehicle/register"
  heartbeat_endpoint: "/api/vehicle/heartbeat"
  jwt_secret: "change-me-in-production"
  username: "obu_device"
  password: "obu_secret"
  timeout_sec: 5
  retry_max: 3
  retry_backoff: 1.5

# ── Main Loop ─────────────────────────────────────────────
loop:
  interval_ms: 100                    # 10 Hz main loop
  log_level: "INFO"
  log_file: "logs/obu.log"
